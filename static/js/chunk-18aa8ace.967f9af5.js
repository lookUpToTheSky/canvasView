(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18aa8ace"],{"4bb5":function(_,e,t){"use strict";t("955a")},"716d":function(module,__webpack_exports__,__webpack_require__){"use strict";var H_workSpace_View2d_node_modules_babel_runtime_7_16_0_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("b5e5"),regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("e186"),regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("9d16"),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_json_stringify_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("16e1"),core_js_modules_es_json_stringify_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_json_stringify_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("a9b6"),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("c284"),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("28fd"),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_6__),element_ui__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("5422"),element_ui__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(element_ui__WEBPACK_IMPORTED_MODULE_7__),_static_js_view2d__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("0a59"),_static_js_view2d__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(_static_js_view2d__WEBPACK_IMPORTED_MODULE_8__);__webpack_exports__["a"]={name:"preview",data:function(){return{data:null,canvasOptions:{},canvas:null,scene:null,autoSize:!0,animationId:null}},beforeRouteEnter:function(_,e,t){if(_.params.pageData){var s=JSON.parse(_.params.pageData);Object.keys(s).length<=0?Object(element_ui__WEBPACK_IMPORTED_MODULE_7__["Notification"])({title:"提示",message:"没有创建视图, 无法预览！",type:"warning",duration:2e3}):t()}else t((function(_){_.$router.push("/")}))},methods:{onMessage:function(_,e){switch(_){case"dblclick":console.log(88);break}},onLinkAPI:function onLinkAPI(node,item){var _this=this;return Object(H_workSpace_View2d_node_modules_babel_runtime_7_16_0_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["a"])(regeneratorRuntime.mark((function _callee(){var params,res;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(params=item.pramas?eval("("+item.pramas+")"):{},res=null,"get"!=item.method){_context.next=8;break}return _context.next=5,_this.$axios.get(item.url,{params:params});case 5:res=_context.sent,_context.next=11;break;case 8:return _context.next=10,_this.$axios.post(item.url,params);case 10:res=_context.sent;case 11:node.data=JSON.stringify(res),item.bindValue&&(node.text=JSON.stringify(eval("JSON.parse(node.data)."+item.bindValue))),_this.canvas.updateProps(node);case 14:case"end":return _context.stop()}}),_callee)})))()},resizeRect:function(){var _=this.canvas.getRect();this.canvas.translate((window.innerWidth-_.width)/2-_.x,(window.innerHeight-_.height)/2-_.y)},findHttp:function(){var _=this;if(this.data.pens){var e=[],t=[];this.data.pens.forEach((function(_){e=_.events.filter((function(_){return 200==_.type})),e.length>0&&t.push({node:_,httpOption:e})})),t.forEach((function(e){_.onLinkAPI(e.node,e.httpOption[0])}))}},setSize:function(_){this.autoSize=_,_?this.scene.resize():this.scene.scale(this.scene.position,1,1)},animation:function(){this.scene.update(),this.animationId=requestAnimationFrame(this.animation)}},mounted:function(){this.data=this.$store.state.viewData,_static_js_view2d__WEBPACK_IMPORTED_MODULE_8___default.a.mode.type="preview",_static_js_view2d__WEBPACK_IMPORTED_MODULE_8___default.a.lock=!0,this.scene=new _static_js_view2d__WEBPACK_IMPORTED_MODULE_8___default.a.scene("#topology-canvas",this.data),this.animation(),window.onresize=this.scene.resize},destroyed:function(){cancelAnimationFrame(this.animationId),_static_js_view2d__WEBPACK_IMPORTED_MODULE_8___default.a.lock=!1,_static_js_view2d__WEBPACK_IMPORTED_MODULE_8___default.a.mode.type="edit"}}},"955a":function(_,e,t){},a64c:function(_,e,t){"use strict";t.r(e);var s=function(){var _=this,e=_.$createElement,t=_._self._c||e;return t("div",{staticClass:"wrap"},[t("el-button",{staticClass:"back",attrs:{type:"primary",size:"small"},on:{click:function(e){return _.$router.go(-1)}}},[_._v("返回")]),t("div",{attrs:{id:"topology-canvas"}}),t("div",{staticClass:"previewType"},[t("el-button",{attrs:{type:_.autoSize?"":"primary",size:"small"},on:{click:function(e){return _.setSize(!1)}}},[_._v("默认")]),t("el-button",{attrs:{type:_.autoSize?"primary":"",size:"small"},on:{click:function(e){return _.setSize(!0)}}},[_._v("自适应")])],1)],1)},a=[],n=t("716d"),i=n["a"],r=(t("4bb5"),t("cba8")),o=Object(r["a"])(i,s,a,!1,null,"3dcff432",null);e["default"]=o.exports}}]);
//# sourceMappingURL=chunk-18aa8ace.967f9af5.js.map