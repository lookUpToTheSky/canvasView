{"version":3,"sources":["webpack:///./src/views/add-equipment.vue?fda3","webpack:///src/views/add-equipment.vue","webpack:///./src/views/add-equipment.vue?604e","webpack:///./src/views/add-equipment.vue","webpack:///./src/views/add-equipment.vue?1028","webpack:///./node_modules/_@babel_runtime@7.15.3@@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack:///./node_modules/_@babel_runtime@7.15.3@@babel/runtime/helpers/esm/iterableToArray.js","webpack:///./node_modules/_@babel_runtime@7.15.3@@babel/runtime/helpers/esm/nonIterableSpread.js","webpack:///./node_modules/_@babel_runtime@7.15.3@@babel/runtime/helpers/esm/toConsumableArray.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","isEdit","attrs","model","value","callback","$$v","expression","_l","item","i","key","groupName","directives","name","rawName","on","$event","userEquipmentGroupShow","equipmentName","addSensor","index","$set","val","vlaue","type","deleteSensor","onsmbmit","centerDialogVisible","addNum","addName","addType","slot","addLotSensor","equipmentWarn","onLeave","onAddEquipmentGroup","staticRenderFns","component","_arrayWithoutHoles","arr","Array","isArray","arrayLikeToArray","_iterableToArray","iter","Symbol","iterator","from","_nonIterableSpread","TypeError","_toConsumableArray","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread"],"mappings":"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","file":"static/js/chunk-4d8a513b.34f31ae6.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrap\"},[_c('div',{staticClass:\"head-title\"},[_c('i',{staticClass:\"el-icon-success\"}),_vm._v(\" \"+_vm._s(_vm.isEdit?'编辑':'添加')+\"设备\")]),_c('ul',{staticClass:\"equipmentInfo\"},[_c('li',[_c('label',[_vm._v(\"设备分组\")]),_c('el-select',{staticClass:\"select\",attrs:{\"disabled\":_vm.isEdit,\"size\":\"small\",\"placeholder\":\"选择设备组\"},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}},_vm._l((_vm.group),function(item,i){return _c('el-option',{key:i,attrs:{\"value\":item.groupName,\"label\":item.groupName}})}),1),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isEdit),expression:\"!isEdit\"}],attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){_vm.userEquipmentGroupShow = true}}},[_c('i',{staticClass:\"el-icon-plus\"})])],1),_c('li',[_c('label',[_vm._v(\"设备名称\")]),_c('el-input',{staticClass:\"select\",attrs:{\"placeholder\":\"请输入设备名称\",\"size\":\"small\"},model:{value:(_vm.equipmentName),callback:function ($$v) {_vm.equipmentName=$$v},expression:\"equipmentName\"}})],1),_c('li',[_c('label',[_vm._v(\"传感器\")]),_c('el-button',{staticClass:\"add-button\",attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.addSensor(1)}}},[_vm._v(\"添加\")]),_c('el-button',{staticClass:\"add-button\",attrs:{\"type\":\"primary\",\"size\":\"small\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.addSensor(2)}}},[_vm._v(\"批量添加\")]),_c('div',{staticClass:\"sensorList\"},_vm._l((_vm.sensorList),function(item,index){return _c('div',{key:index,staticClass:\"sensor\"},[_c('el-input',{staticClass:\"add-button\",attrs:{\"size\":\"small\",\"placeholder\":\"传感器名称\"},model:{value:(item.name),callback:function ($$v) {_vm.$set(item, \"name\", $$v)},expression:\"item.name\"}}),_c('el-select',{staticClass:\"add-button\",attrs:{\"size\":\"small\",\"placeholder\":\"类型\"},model:{value:(item.type),callback:function ($$v) {_vm.$set(item, \"type\", $$v)},expression:\"item.type\"}},_vm._l((_vm.sensorType),function(val){return _c('el-option',{key:val.vlaue,attrs:{\"value\":val.value,\"label\":val.type}})}),1),_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"small\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.deleteSensor(index)}}},[_vm._v(\"删除\")])],1)}),0)],1),_c('li',[_c('el-button',{staticClass:\"add-button\",attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.onsmbmit}},[_vm._v(\"确定\"+_vm._s(_vm.isEdit?'编辑':'添加')+\"此设备\")])],1)]),_c('el-dialog',{attrs:{\"title\":\"批量添加传感器\",\"visible\":_vm.centerDialogVisible,\"width\":\"375px\"},on:{\"update:visible\":function($event){_vm.centerDialogVisible=$event}}},[_c('ul',{staticClass:\"addLotSensor\"},[_c('li',[_c('span',[_vm._v(\"数量：\"),_c('small',{attrs:{\"type\":\"priamry\"}},[_vm._v(\"(必填)\")])]),_c('el-input-number',{staticClass:\"inputW\",attrs:{\"size\":\"small\",\"min\":1,\"max\":50},model:{value:(_vm.addNum),callback:function ($$v) {_vm.addNum=$$v},expression:\"addNum\"}})],1),_c('li',[_c('span',[_vm._v(\"名称前缀：\"),_c('small',[_vm._v(\"(可选)\")])]),_c('el-input',{staticClass:\"inputW\",attrs:{\"size\":\"small\"},model:{value:(_vm.addName),callback:function ($$v) {_vm.addName=$$v},expression:\"addName\"}})],1),_c('li',[_c('span',[_vm._v(\"类型：\"),_c('small',[_vm._v(\"(必填)\")])]),_c('el-select',{staticClass:\"inputW\",attrs:{\"size\":\"small\",\"placeholder\":\"类型\"},model:{value:(_vm.addType),callback:function ($$v) {_vm.addType=$$v},expression:\"addType\"}},_vm._l((_vm.sensorType),function(val){return _c('el-option',{key:val.value,attrs:{\"value\":val.value,\"label\":val.type}})}),1)],1)]),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.centerDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.addLotSensor}},[_vm._v(\"确 定\")])],1)]),_c('el-dialog',{attrs:{\"title\":\"设备组\",\"visible\":_vm.equipmentWarn,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.equipmentWarn=$event}}},[_c('span',[_vm._v(\"设备未提交，是否提交？\")]),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.onLeave}},[_vm._v(\"放弃提交\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onsmbmit}},[_vm._v(\"提交设备\")])],1)]),_c('el-dialog',{attrs:{\"title\":\"设备组名称\",\"visible\":_vm.userEquipmentGroupShow,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.userEquipmentGroupShow=$event}}},[_c('el-input',{attrs:{\"placeholder\":\"请输入设备组名称\"},model:{value:(_vm.groupName),callback:function ($$v) {_vm.groupName=$$v},expression:\"groupName\"}}),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.userEquipmentGroupShow = false}}},[_vm._v(\"取消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onAddEquipmentGroup}},[_vm._v(\"确定\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n<div class='wrap'>\r\n    <div class=\"head-title\"><i class=\"el-icon-success\"></i>&nbsp;{{isEdit?'编辑':'添加'}}设备</div>\r\n    <ul class=\"equipmentInfo\">\r\n        <li>\r\n            <label>设备分组</label>\r\n            <el-select class=\"select\" :disabled=\"isEdit\" v-model=\"value\" size=\"small\" placeholder=\"选择设备组\">\r\n                <el-option v-for=\"(item, i) of group\" :key=\"i\" :value=\"item.groupName\" :label=\"item.groupName\"></el-option>\r\n            </el-select>\r\n            <el-button type=\"primary\" v-show=\"!isEdit\" @click=\"userEquipmentGroupShow = true\" size=\"small\"><i class=\"el-icon-plus\"></i></el-button>\r\n        </li>\r\n        <li>\r\n             <label>设备名称</label>\r\n             <el-input class=\"select\" v-model=\"equipmentName\"  placeholder=\"请输入设备名称\" size=\"small\"></el-input>\r\n        </li>\r\n        <li>\r\n            <label>传感器</label>\r\n            <el-button type=\"primary\" class=\"add-button\" @click=\"addSensor(1)\" size=\"small\">添加</el-button>\r\n            <el-button type=\"primary\" class=\"add-button\" @click=\"addSensor(2)\" size=\"small\" plain>批量添加</el-button>\r\n            <div class=\"sensorList\">\r\n                <div class=\"sensor\" v-for=\"(item, index) of sensorList\" :key=\"index\">\r\n                    <el-input class=\"add-button\" v-model=\"item.name\" size=\"small\" placeholder=\"传感器名称\"></el-input>\r\n                    <el-select class=\"add-button\" v-model=\"item.type\" size=\"small\" placeholder=\"类型\">\r\n                        <el-option v-for=\"val of sensorType\" :key=\"val.vlaue\" :value=\"val.value\" :label=\"val.type\"></el-option>\r\n                    </el-select>\r\n                    <el-button type=\"danger\" size=\"small\" @click=\"deleteSensor(index)\" plain>删除</el-button>\r\n                </div>\r\n            </div>\r\n        </li>\r\n        <li>\r\n            <el-button type=\"primary\" class=\"add-button\" @click=\"onsmbmit\" size=\"small\">确定{{isEdit?'编辑':'添加'}}此设备</el-button>\r\n        </li>\r\n    </ul>\r\n    <el-dialog\r\n        title=\"批量添加传感器\"\r\n        :visible.sync=\"centerDialogVisible\"\r\n        width=\"375px\"\r\n        >\r\n        <ul class=\"addLotSensor\">\r\n            <li>\r\n                <span>数量：<small type=\"priamry\">(必填)</small></span><el-input-number class=\"inputW\" v-model=\"addNum\" size=\"small\" :min=\"1\" :max=\"50\"></el-input-number>\r\n            </li>\r\n            <li>\r\n                <span>名称前缀：<small>(可选)</small></span><el-input class=\"inputW\" v-model=\"addName\" size=\"small\"></el-input>\r\n            </li>\r\n            <li>\r\n                <span>类型：<small>(必填)</small></span>\r\n                <el-select class=\"inputW\" v-model=\"addType\" size=\"small\" placeholder=\"类型\">\r\n                    <el-option v-for=\"val of sensorType\" :key=\"val.value\" :value=\"val.value\" :label=\"val.type\"></el-option>\r\n                </el-select>\r\n            </li>\r\n        </ul>\r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button @click=\"centerDialogVisible = false\" size=\"small\">取 消</el-button>\r\n            <el-button type=\"primary\" @click=\"addLotSensor\" size=\"small\">确 定</el-button>\r\n        </span>\r\n    </el-dialog>\r\n    <!-- 离开提示 -->\r\n    <el-dialog\r\n        title=\"设备组\"\r\n        :visible.sync=\"equipmentWarn\"\r\n        width=\"30%\">\r\n        <span>设备未提交，是否提交？</span>\r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button @click=\"onLeave\">放弃提交</el-button>\r\n            <el-button type=\"primary\" @click=\"onsmbmit\">提交设备</el-button>\r\n        </span>\r\n    </el-dialog>\r\n    <!-- 创建设备组 -->\r\n    <el-dialog\r\n        title=\"设备组名称\"\r\n        :visible.sync=\"userEquipmentGroupShow\"\r\n        width=\"30%\">\r\n        <el-input v-model=\"groupName\" placeholder=\"请输入设备组名称\"></el-input>\r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button @click=\"userEquipmentGroupShow = false\">取消</el-button>\r\n            <el-button type=\"primary\" @click=\"onAddEquipmentGroup\">确定</el-button>\r\n        </span>\r\n    </el-dialog>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport { Notification , MessageBox} from 'element-ui';\r\nexport default {\r\n    data () {\r\n        return {\r\n            value: null,\r\n            isEdit: false,\r\n            index: 0,\r\n            centerDialogVisible: false,\r\n            equipmentWarn: false,\r\n            userEquipmentGroupShow: false,\r\n            sensorList: [],\r\n            group: [],\r\n            groupName: null,\r\n            equipmentName: '',\r\n            addNum: 5,\r\n            addName: null,\r\n            addType: '1',\r\n            goPath: '',\r\n            sensorType: [{value: '1', type: '开关型'},{value: '2', type: '数字型'},\r\n            {value: '3', type: '信息型'}]\r\n        }\r\n    },\r\n    methods: {\r\n        onAddEquipmentGroup () {\r\n            this.group.push({groupName: this.groupName, equipmentList: []})\r\n            this.$store.commit('addEquipmentGroup', this.group)\r\n            this.userEquipmentGroupShow = false\r\n            this.value = this.groupName\r\n        },\r\n        addSensor (num) {\r\n            if(num === 1) {\r\n                this.sensorList.unshift({name: '', type: '1'})\r\n            }else{\r\n                this.centerDialogVisible = true\r\n                this.addNum = 5\r\n                this.addType = '1'\r\n                 this.addName = null\r\n            }\r\n        },\r\n        addLotSensor () {\r\n            let sensor = {name: this.addName, type: this.addType, state: 0};\r\n            if(this.addNum && this.addType) {\r\n                for(let i = 0; i < this.addNum; i++) {\r\n                    this.sensorList.unshift({...sensor})\r\n                }\r\n                this.centerDialogVisible = false\r\n            }else{\r\n                Notification({type: 'warning', message:'添加失败！必填项未完成！'})\r\n            }\r\n        },\r\n        deleteSensor (index) {\r\n            this.sensorList.splice(index, 1)\r\n        },\r\n        //提交添加设备\r\n        onsmbmit () {\r\n            this.group.forEach( (item, i) => {\r\n                if(item.groupName === this.value) {\r\n                    if(this.isEdit) {\r\n                        this.group[i].equipmentList[this.index] = {\r\n                            equipmentName: this.equipmentName,\r\n                            buildTime: new Date().getTime(),\r\n                            sensorList: this.sensorList\r\n                        }\r\n                    }else{\r\n                        this.group[i].equipmentList.unshift({\r\n                            equipmentName: this.equipmentName,\r\n                            buildTime: new Date().getTime(),\r\n                            sensorList: this.sensorList})\r\n                        }\r\n                    }\r\n            })\r\n            if(!this.isEdit) this.sensorList = [];\r\n            this.$store.commit('addEquipmentGroup', [...this.group])\r\n            Notification({type: 'success', message:'提交成功'})\r\n            if(this.goPath) this.onLeave();\r\n        },\r\n        onLeave () {\r\n            this.equipmentWarn = false\r\n            this.sensorList = []\r\n            this.$router.push(this.goPath)\r\n        }\r\n    },\r\n    beforeRouteEnter(to, from, next) {\r\n        if(to.query.name) {\r\n            next(vm => {\r\n                vm.value = to.query.name\r\n            })\r\n        }else if(to.query.equipment){\r\n            next(vm => { \r\n                vm.isEdit = true;\r\n                let equipment = JSON.parse(to.query.equipment)\r\n                vm.index = to.query.index\r\n                vm.value = to.query.groupName\r\n                vm.equipmentName = equipment.equipmentName\r\n                vm.sensorList = equipment.sensorList\r\n            });\r\n        }else{\r\n            next()\r\n        }\r\n    },\r\n    beforeRouteLeave(to, from, next) {\r\n        if(this.sensorList.length > 0 && !this.isEdit) {\r\n            this.goPath = to.path\r\n            this.equipmentWarn = true\r\n        }else{\r\n            next()\r\n        }\r\n    },\r\n    mounted () {\r\n        this.group = this.$store.state.userEquipment.userEquipmentGroup\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n    .wrap {\r\n        padding: 20px;\r\n        padding-top: 80px;\r\n        height: 100vh;\r\n        box-sizing: border-box;\r\n        position: relative;\r\n        .head-title {\r\n            position: absolute;\r\n            top: 0;\r\n            left: 0;\r\n            right: 0;\r\n            color: #fff;\r\n            background: #545c64;\r\n            font-size: 18px;\r\n            padding: 10px;\r\n            border-bottom: 2px solid #409EFF;\r\n        }\r\n        .equipmentInfo {\r\n            list-style: none;\r\n            margin: 0;\r\n            padding: 0;\r\n            li {\r\n                padding: 15px;\r\n                align-items: center;\r\n                margin-bottom: 20px;\r\n                background: #fff;\r\n                label {\r\n                    width: 80px;\r\n                    display: inline-block;\r\n                    font-size: 16px;\r\n                    color: #000;\r\n                    margin-right: 20px;\r\n                    text-align: end;\r\n                }\r\n                .select {\r\n                    width: 320px;\r\n                    margin-right: 10px;\r\n                }\r\n                .add-button {\r\n                    width: 155px;\r\n                }\r\n                .sensorList {\r\n                    .sensor {\r\n                        display: flex;\r\n                        margin-left: 30px;\r\n                        margin-top: 10px;\r\n                    }\r\n                    .add-button {\r\n                        margin-right: 10px;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        .addLotSensor {\r\n            li {\r\n                display: flex;\r\n                align-items: center;\r\n                margin-bottom: 10px;\r\n                >span {\r\n                    display: inline-block;\r\n                    width: 120px;\r\n                }\r\n            }\r\n        }\r\n        .inputW {\r\n            width: 240px !important;\r\n        }\r\n    }\r\n</style>","import mod from \"-!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./add-equipment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./add-equipment.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./add-equipment.vue?vue&type=template&id=dbbe1e52&scoped=true&\"\nimport script from \"./add-equipment.vue?vue&type=script&lang=js&\"\nexport * from \"./add-equipment.vue?vue&type=script&lang=js&\"\nimport style0 from \"./add-equipment.vue?vue&type=style&index=0&id=dbbe1e52&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"dbbe1e52\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./add-equipment.vue?vue&type=style&index=0&id=dbbe1e52&scoped=true&lang=scss&\"","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}"],"sourceRoot":""}