(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-476618f3"],{"1d02":function(t,e,n){"use strict";n("5683c")},"5683c":function(t,e,n){},bd18:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap"},[n("div",{staticClass:"head-title"},[n("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:function(e){t.userEquipmentGroupShow=!0,t.groupName=null}}},[n("i",{staticClass:"el-icon-circle-plus-outline"}),t._v("  新建设备组 ")]),n("div",[n("el-input",{staticClass:"search-input",attrs:{size:"small",placeholder:"设备名称"},model:{value:t.modelName,callback:function(e){t.modelName=e},expression:"modelName"}}),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.filters}},[n("i",{staticClass:"el-icon-search"},[t._v("搜索")])])],1)],1),t._l(t.allEquipmentListGroup,(function(e,i){return n("div",{key:i,staticClass:"table"},[n("div",{staticClass:"group"},[n("div",{staticClass:"groupName"},[n("i",{staticClass:"el-icon-menu"}),t._v("  "+t._s(e.groupName)+" "),n("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:function(n){t.userEquipmentGroupShow=!0,t.groupIndex=i,t.groupName=e.groupName}}},[n("i",{staticClass:"el-icon-edit"})])],1),n("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(e){return t.onDeleteGroup(i)}}},[n("i",{staticClass:"el-icon-delete"}),t._v("删除该组")]),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){return t.onAddEquipment(e.groupName)}}},[n("i",{staticClass:"el-icon-circle-plus-outline"}),t._v("该组添加设备")])],1),n("el-table",{ref:"multipleTable",refInFor:!0,staticStyle:{width:"100%"},attrs:{data:e.equipmentList,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",fit:"true"}}),n("el-table-column",{attrs:{label:"#",fit:"true"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.$index+1)+" ")]}}],null,!0)}),n("el-table-column",{attrs:{label:"设备名称",fit:"true"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("i",{staticClass:"el-icon-s-platform"}),t._v(" "+t._s(e.row.equipmentName)+" ")]}}],null,!0)}),n("el-table-column",{attrs:{prop:"buildTime",label:"创建时间",fit:"true"}}),n("el-table-column",{attrs:{label:"传感器数量",fit:"true"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.sensorList.length)+" ")]}}],null,!0)}),n("el-table-column",{attrs:{label:"操作",width:"400"},scopedSlots:t._u([{key:"default",fn:function(i){return[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){return t.onChargeSensor(e.groupName,i)}}},[t._v("管理传感器")]),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){return t.onEditEquipment(e.groupName,i)}}},[t._v("编辑设备")]),n("el-button",{attrs:{type:"primary",size:"mini"}},[t._v("启用")]),n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(n){return t.onDeleEquipment(e.groupName,i)}}},[t._v("删除设备")])]}}],null,!0)})],1)],1)})),n("el-dialog",{attrs:{title:"设备组名称",visible:t.userEquipmentGroupShow,width:"30%"},on:{"update:visible":function(e){t.userEquipmentGroupShow=e}}},[n("el-input",{attrs:{placeholder:"请输入设备组名称"},model:{value:t.groupName,callback:function(e){t.groupName=e},expression:"groupName"}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.userEquipmentGroupShow=!1}}},[t._v("取消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.onAddEquipmentGroup}},[t._v("确定")])],1)],1),n("el-dialog",{attrs:{title:"传感器管理",visible:t.sensorShow,top:"8vh",width:"90%"},on:{"update:visible":function(e){t.sensorShow=e}}},[n("div",{staticClass:"selecteEquipment"},[t._v(" 设备组： "),n("el-select",{attrs:{disabled:!0,placeholder:"未命名",size:"small"},model:{value:this.currentSensor.groupName,callback:function(e){t.$set(this.currentSensor,"groupName",e)},expression:"this.currentSensor.groupName"}}),t._v(" 设备： "),n("el-select",{attrs:{disabled:!0,placeholder:"未命名",size:"small"},model:{value:this.currentSensor.equipmentName,callback:function(e){t.$set(this.currentSensor,"equipmentName",e)},expression:"this.currentSensor.equipmentName"}})],1),n("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:this.currentSensor.sensorList,"tooltip-effect":"dark",height:"60vh"},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",fit:"true"}}),n("el-table-column",{attrs:{label:"#",fit:"true"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.$index+1)+" ")]}}])}),n("el-table-column",{attrs:{label:"传感器名称",fit:"true"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("i",{staticClass:"el-icon-data-analysis"}),t._v(" "+t._s(e.row.name)+" ")]}}])}),n("el-table-column",{attrs:{prop:"buildTime",label:"创建时间",fit:"true"}},[t._v(" 2020-08-12 ")]),n("el-table-column",{attrs:{label:"类型",fit:"true"},scopedSlots:t._u([{key:"default",fn:function(e){return["1"===e.row.type?n("span",[t._v("开关型")]):"2"===e.row.type?n("span",[t._v("数值型")]):"3"===e.row.type?n("span",[t._v("信息型")]):t._e()]}}])}),n("el-table-column",{attrs:{label:"是否启用",fit:"true"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#888"},model:{value:e.row.state,callback:function(n){t.$set(e.row,"state",n)},expression:"scope.row.state"}})]}}])}),n("el-table-column",{attrs:{label:"操作",fit:!0},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"primary",size:"mini"}},[t._v("修改")]),n("el-button",{attrs:{type:"danger",size:"mini"}},[t._v("删除")])]}}])})],1)],1)],2)},o=[],l=n("4d63"),r=n("f2b6"),u=(n("2e9c"),n("5d63"),n("8a61"),n("f667"),{data:function(){return{modelName:null,groupName:null,groupIndex:null,currentSensor:[],sensorShow:!1,equipmentListGroup:[],userEquipmentGroupShow:!1,allEquipmentListGroup:[{equipmentName:"设备名称——001",buildTime:"2020-9-8 11:00:00",sensorCount:50}]}},methods:{filters:function(){var t=this;this.modelName?this.equipmentListGroup=this.allEquipmentListGroup.filter((function(e){return-1!=e.name.indexOf(t.modelName)})):this.equipmentListGroup=Object(r["a"])(this.allEquipmentListGroup)},handleSelectionChange:function(){},onAddEquipmentGroup:function(){this.groupIndex?this.allEquipmentListGroup[this.groupIndex].groupName=this.groupName:this.allEquipmentListGroup.unshift({groupName:this.groupName,equipmentList:[]}),this.$store.commit("addEquipmentGroup",this.allEquipmentListGroup),this.userEquipmentGroupShow=!1,this.value=this.groupName},onEditGroupName:function(){},onDeleteGroup:function(t){this.allEquipmentListGroup.splice(t,1),this.$store.commit("addEquipmentGroup",this.allEquipmentListGroup)},onAddEquipment:function(t){this.$router.push({path:"/add-equipment",query:{name:t}})},onEditEquipment:function(t,e){this.$router.push({path:"/add-equipment",query:{groupName:t,index:e.$index,equipment:JSON.stringify(e.row)}})},onDeleEquipment:function(t,e){var n=this;this.allEquipmentListGroup.forEach((function(i,o){i.groupName==t&&n.allEquipmentListGroup[o].equipmentList.splice(e.$index,1)})),this.$store.commit("addEquipmentGroup",this.allEquipmentListGroup)},onChargeSensor:function(t,e){var n=Object(l["a"])({},e.row);n.groupName=t,this.currentSensor=n,this.sensorShow=!0}},mounted:function(){this.equipmentListGroup=this.allEquipmentListGroup=Object(r["a"])(this.$store.state.userEquipment.userEquipmentGroup)}}),s=u,a=(n("1d02"),n("cba8")),c=Object(a["a"])(s,i,o,!1,null,"4c99a6a0",null);e["default"]=c.exports},f2b6:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n("6d9d");function o(t){if(Array.isArray(t))return Object(i["a"])(t)}n("45f6"),n("6c45"),n("da02"),n("c443"),n("5006"),n("cd46"),n("cc7e");function l(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var r=n("10c3");function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t){return o(t)||l(t)||Object(r["a"])(t)||u()}}}]);
//# sourceMappingURL=chunk-476618f3.f4fa035c.js.map